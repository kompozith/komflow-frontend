<div>
  <div *ngIf="isLoading" class="text-center p-4">
    <mat-spinner diameter="40"></mat-spinner>
    <p class="mt-2">Loading store data...</p>
  </div>

  <form *ngIf="!isLoading" [formGroup]="storeForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-lg-8">
        <mat-card class="cardWithShadow b-1 rounded p-30">
          <h4>General</h4>
          <mat-label class="f-s-14 f-w-600 m-b-8 d-block m-t-20">Store Name <span
              class="text-error">*</span></mat-label>
          <mat-form-field appearance="outline" class="w-100 p-0" color="primary">
            <input type="text" matInput placeholder="Store name" formControlName="name" />
            <mat-error *ngIf="storeForm.get('name')?.hasError('required') && storeForm.get('name')?.touched">
              Store name is required
            </mat-error>
            <mat-error *ngIf="storeForm.get('name')?.hasError('minlength') && storeForm.get('name')?.touched">
              Store name must be at least 2 characters
            </mat-error>
          </mat-form-field>

          <div class="f-s-14 f-w-600 m-b-8 d-block m-t-20">Description</div>
          <mat-form-field appearance="outline" class="w-100">
            <textarea matInput placeholder="Enter store description" formControlName="description" rows="4"></textarea>
          </mat-form-field>
        </mat-card>
        <mat-card class="cardWithShadow b-1 rounded p-30">
          <h4>Address Information</h4>
          <div class="row">
            <div class="col-lg-6">
              <mat-label class="f-s-14 f-w-600 m-b-8 d-block m-t-20">Street Address <span
                  class="text-error">*</span></mat-label>
              <mat-form-field appearance="outline" class="w-100 p-0" color="primary">
                <input type="text" matInput placeholder="Street Address" formControlName="streetAddress" />
                <mat-error *ngIf="storeForm.get('streetAddress')?.hasError('required') && storeForm.get('streetAddress')?.touched">
                  Street address is required
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-6">
              <mat-label class="f-s-14 f-w-600 m-b-8 d-block m-t-20">City <span
                  class="text-error">*</span></mat-label>
              <mat-form-field appearance="outline" class="w-100 p-0" color="primary">
                <input type="text" matInput placeholder="City" formControlName="city" />
                <mat-error *ngIf="storeForm.get('city')?.hasError('required') && storeForm.get('city')?.touched">
                  City is required
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6">
              <mat-label class="f-s-14 f-w-600 m-b-8 d-block m-t-20">Region <span
                  class="text-error">*</span></mat-label>
              <mat-form-field appearance="outline" class="w-100 p-0" color="primary">
                <input type="text" matInput placeholder="Region" formControlName="region" />
                <mat-error *ngIf="storeForm.get('region')?.hasError('required') && storeForm.get('region')?.touched">
                  Region is required
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-6">
              <mat-label class="f-s-14 f-w-600 m-b-8 d-block m-t-20">Phone <span
                  class="text-error">*</span></mat-label>
              <mat-form-field appearance="outline" class="w-100 p-0" color="primary">
                <input type="text" matInput placeholder="Phone Number" formControlName="phone" />
                <mat-error *ngIf="storeForm.get('phone')?.hasError('required') && storeForm.get('phone')?.touched">
                  Phone number is required
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6">
              <mat-label class="f-s-14 f-w-600 m-b-8 d-block m-t-20">Landmark</mat-label>
              <mat-form-field appearance="outline" class="w-100 p-0" color="primary">
                <input type="text" matInput placeholder="Landmark" formControlName="landmark" />
              </mat-form-field>
            </div>
            <div class="col-lg-6">
              <mat-label class="f-s-14 f-w-600 m-b-8 d-block m-t-20">Delivery Instructions</mat-label>
              <mat-form-field appearance="outline" class="w-100 p-0" color="primary">
                <textarea matInput placeholder="Delivery instructions" formControlName="instructions" rows="2"></textarea>
              </mat-form-field>
            </div>
          </div>
        </mat-card>
      </div>
      <div class="col-lg-4">
        <mat-card class="cardWithShadow b-1 rounded p-30">
          <div class="d-flex justify-content-between">
            <h4>Brand Association</h4>
          </div>

          <mat-form-field appearance="outline" class="w-100 m-t-20">
            <mat-select formControlName="brandId" disableOptionCentering placeholder="Select Brand" [disabled]="isLoadingBrands">
              <mat-option *ngFor="let brand of brandOptions" [value]="brand.id">
                {{ brand.name }}
              </mat-option>
            </mat-select>
            <mat-hint *ngIf="isLoadingBrands">Loading brands...</mat-hint>
            <mat-error *ngIf="storeForm.get('brandId')?.hasError('required') && storeForm.get('brandId')?.touched">
              Brand selection is required
            </mat-error>
          </mat-form-field>
        </mat-card>
        <mat-card class="cardWithShadow b-1 rounded p-30">
          <h4>Store Status</h4>
          <div class="f-s-14 f-w-600 m-b-8 d-block m-t-20">
            Store Status
          </div>
          <mat-radio-group value="active" class="d-flex flex-wrap gap-24 justify-content-start 100 mt-2">
            <mat-card class="cardWithShadow b-1 rounded d-flex gap-30 align-items-center flex-row">
              <mat-radio-button class="p-r-16 p-l-6 p-y-2" color="primary" value="active">
                Active
              </mat-radio-button>
            </mat-card>
            <mat-card class="cardWithShadow b-1 rounded d-flex gap-30 align-items-center flex-row">
              <mat-radio-button class="p-r-16 p-l-6 p-y-2" color="primary" value="inactive">
                Inactive
              </mat-radio-button>
            </mat-card>
          </mat-radio-group>
        </mat-card>
      </div>
    </div>
    <div class="d-flex gap-20">
      <button mat-button class="bg-secondary text-white" type="button" mat-dialog-close (click)="getBack()">Cancel</button>
      <button
        mat-flat-button
        cdkFocusInitial
        class="bg-primary text-white"
        type="submit"
        [disabled]="storeForm.invalid"
      >
        Update Store
      </button>
    </div>
  </form>
</div>